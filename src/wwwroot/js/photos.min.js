window.sidebar=function(){function s(){n=!n;r()}function r(){h();l()}function h(){n?document.body.classList.add("has-sidebar"):document.body.classList.remove("has-sidebar")}function c(){for(let n=0;n<t.length;n++)t[n]()}function l(){localStorage.setItem(i,n)}const i="showSidebar",u=localStorage.getItem(i),f=document.getElementById("mobile-detector"),e=window.getComputedStyle(f).display!="none";let n=!e&&u==="true",o=document.getElementById("sidebar-toggler"),t=[];return o.addEventListener("click",s),document.body.addEventListener("transitionend",c),r(),{subscribe:function(n){t.push(n)}}}();window.imageSizer=function(n){function f(){r=s.clientWidth/t;l=a();v();y()}function a(){let n=null;for(let t=0;t<i.length;t++)r>=i[t]&&(n=i[t]);return n||(n=r<i[0]?i[0]:i[i.length-1]),n}function v(){let n=100/t;c.innerHTML=".photo-thumbnail {width: "+n+"%;";u.disabled=t===1;h.disabled=t===10}function y(){localStorage.setItem(e,t)}const e="imgPerRow",o=localStorage.getItem(e),i=[100,200,300];let s=document.querySelector(n),u=document.getElementById("zoom-plus"),h=document.getElementById("zoom-minus"),c=document.createElement("style"),t=o?parseInt(o):4,r,l;if(s&&u)return document.body.appendChild(c),u.addEventListener("click",function(){t--;f()}),h.addEventListener("click",function(){t++;f()}),f(),{getHeight:function(){return l},getHeightInPx:function(){return r},getImagesPerRow:function(){return t}}}("#thumbnails",window.sidebar),function(){function n(n){_$thumbnail=n;s()}function s(){let n=!!_$thumbnail;if(t(_$showWhenOpen,n),t(_$hideWhenOpen,!n),n){let n=_$thumbnail.getAttribute("data-fullsize-url");c.src=n;l.setAttribute("href",n+"?download=true");t([r],_$thumbnail.previousElementSibling);t([u],_$thumbnail.nextElementSibling)}}function t(n,t){for(let i=0;i<n.length;i++)n[i]&&n[i].classList[t?"remove":"add"]("hidden")}let i=document.getElementById("photo-list"),h=document.getElementById("photo-viewer"),c=document.getElementById("photo-viewer-image"),f=document.getElementById("close-photo-viewer"),r=document.getElementById("prev-photo"),u=document.getElementById("next-photo"),l=document.getElementById("photo-viewer-download-button"),e=document.getElementById("photo-viewer-delete-button"),o;_$hideWhenOpen=[i,document.getElementById("photo-list-footer-left"),document.getElementById("photo-list-footer-right"),document.getElementById("photo-list-sidebar")];_$showWhenOpen=[h,document.getElementById("photo-viewer-footer-left")];_$thumbnail=null;i&&i.addEventListener("click",function(t){t.target.classList.contains("photo-thumbnail")&&(o=document.scrollingElement.scrollTop,n(t.target))});f&&f.addEventListener("click",function(){n(null);document.scrollingElement.scrollTop=o});r&&r.addEventListener("click",function(){n(_$thumbnail.previousElementSibling)});u&&u.addEventListener("click",function(){n(_$thumbnail.nextElementSibling)});e&&e.addEventListener("click",function(){window.photoList.deletePhotos([_$thumbnail.id],!1)&&(_$thumbnail.parentElement.removeChild(_$thumbnail),n(null))});s()}();window.thumbnails=function(n){function t(){let u=n&&n.getHeight(),i=document.getElementsByClassName("photo-thumbnail"),t,r;for(let n=0;n<i.length;n++)t=i[n],r=t.getAttribute("data-background-url"),t.style.backgroundImage="url("+r.replace("[size]",u)+")"}return window.addEventListener("resize",t),{render:t}}(window.imageSizer,window.sidebar);window.multiSelect=function(){function e(){n=document.querySelectorAll(".photo-thumbnail-select:checked");f=[];for(let t=0;t<n.length;t++)f.push(n[t].getAttribute("data-id"));y()}function y(){for(let n=0;n<h.length;n++)h[n].disabled=!f.length;t.length===n.length?(c.disabled=!0,l.disabled=!1):(c.disabled=!1,l.disabled=!0);n.length?u.classList.add("has-selection"):u.classList.remove("has-selection")}function s(n){for(let i=0;i<t.length;i++)t[i].checked=n;e()}let u=document.body,a=document.getElementById("enable-selection"),v=document.getElementById("disable-selection"),h=document.getElementsByClassName("requires-selection"),t=document.querySelectorAll(".photo-thumbnail-select"),c=document.getElementById("select-all"),l=document.getElementById("unselect-all"),i={},n=[],f=[],r=null,o=!1;return t.forEach(function(n,t){i[n.id]=t}),document.addEventListener("keydown",function(n){n.key==="Shift"&&(o=!0)}),document.addEventListener("keyup",function(n){n.key==="Shift"&&setTimeout(function(){o=!1},500)}),document.addEventListener("change",function(n){if(o&&r){let u=i[r.id],f=i[n.target.id];u>f&&(u=i[n.target.id],f=i[r.id]);for(let n=u;n<=f;n++)t[n].checked=r.checked}else r=n.target;e()}),a.addEventListener("click",function(){u.classList.add("has-selection")}),v.addEventListener("click",function(){s(!1);u.classList.remove("has-selection")}),e(),{getSelectedCheckboxes:function(){return n},getSelectedFiles:function(){return f},selectAll:function(){s(!0)},clearAll:function(){s(!1)},update:e}}();